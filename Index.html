<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q-Service | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <style>
        body { font-family: 'Kanit', sans-serif; background-color: #f8fafc; color: #0f172a; }
        
        /* Modern Gradient Text */
        .text-gradient { background: linear-gradient(135deg, #2563eb 0%, #4f46e5 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        /* Glass Effect */
        .glass-nav { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(226, 232, 240, 0.8); }
        
        /* Input Fields */
        .input-pro {
            width: 100%; padding: 14px 18px; border-radius: 12px; border: 1px solid #e2e8f0; background: #ffffff;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); font-size: 0.95rem;
        }
        .input-pro:focus { border-color: #4f46e5; ring: 4px solid #e0e7ff; box-shadow: 0 4px 12px rgba(79, 70, 229, 0.1); outline: none; }
        
        /* Buttons */
        .btn-pro {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); color: white; padding: 14px 28px;
            border-radius: 12px; font-weight: 600; letter-spacing: 0.5px; transition: all 0.3s;
            display: inline-flex; align-items: center; justify-content: center; gap: 8px; cursor: pointer;
        }
        .btn-pro:hover { transform: translateY(-2px); box-shadow: 0 10px 20px -5px rgba(15, 23, 42, 0.3); }
        .btn-pro:active { transform: scale(0.98); }

        /* Project Card */
        .project-card {
            background: white; border-radius: 20px; padding: 24px; border: 1px solid #f1f5f9;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.02); transition: all 0.3s ease; position: relative; overflow: hidden;
        }
        .project-card:hover { transform: translateY(-4px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.05); border-color: #e2e8f0; }
        
        /* Status Bar */
        .status-bar-bg { width: 100%; height: 6px; background: #f1f5f9; border-radius: 99px; overflow: hidden; margin-top: 16px; }
        .status-bar-fill { height: 100%; border-radius: 99px; transition: width 1s ease-in-out; }
        .st-pending-fill { width: 25%; background: #fbbf24; }
        .st-working-fill { width: 50%; background: #3b82f6; }
        .st-testing-fill { width: 75%; background: #a855f7; }
        .st-completed-fill { width: 100%; background: #22c55e; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <nav class="glass-nav fixed w-full z-50 top-0">
        <div class="max-w-7xl mx-auto px-6 h-20 flex justify-between items-center">
            <div class="flex items-center gap-3 cursor-pointer" onclick="location.reload()">
                <div class="w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center text-white text-xl shadow-lg">
                    <i class="fa-solid fa-code"></i>
                </div>
                <div>
                    <h1 class="font-bold text-xl tracking-tight text-slate-800">Q-Service</h1>
                    <p class="text-[10px] text-slate-400 font-medium uppercase tracking-widest">Web Builder</p>
                </div>
            </div>

            <div id="nav-guest" class="flex items-center gap-4">
                <button onclick="View.show('login')" class="text-slate-500 font-bold hover:text-slate-800 transition">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
                <button onclick="View.show('register')" class="bg-slate-900 text-white px-5 py-2.5 rounded-full font-bold shadow-md hover:bg-slate-800 transition transform hover:-translate-y-0.5">
                    ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
                </button>
            </div>

            <div id="nav-user" class="hidden flex items-center gap-6">
                <div class="hidden md:block text-right">
                    <div id="user-name" class="font-bold text-slate-800 text-sm">User</div>
                    <div class="text-[10px] text-slate-400">Customer Account</div>
                </div>
                <button onclick="Auth.logout()" class="w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 hover:bg-red-50 hover:text-red-500 transition">
                    <i class="fa-solid fa-right-from-bracket"></i>
                </button>
            </div>
        </div>
    </nav>

    <main id="app" class="flex-1 pt-24 pb-12 px-6">

        <section id="page-auth" class="hidden min-h-[80vh] flex items-center justify-center">
            <div class="w-full max-w-md bg-white p-10 rounded-3xl shadow-xl border border-slate-100 animate__animated animate__fadeInUp">
                
                <div id="form-login">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold text-slate-800 mb-2">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö</h2>
                        <p class="text-slate-400">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
                    </div>
                    <div class="space-y-5">
                        <div>
                            <label class="text-xs font-bold text-slate-500 ml-1 uppercase">Email</label>
                            <input id="l-email" class="input-pro" placeholder="name@example.com">
                        </div>
                        <div>
                            <label class="text-xs font-bold text-slate-500 ml-1 uppercase">Password</label>
                            <input id="l-pass" type="password" class="input-pro" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        </div>
                        <button onclick="Auth.login()" class="btn-pro w-full shadow-lg shadow-blue-500/20">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</button>
                    </div>
                    <p class="text-center mt-8 text-sm text-slate-400">
                        ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? <a href="#" onclick="View.toggleAuth('reg')" class="text-blue-600 font-bold hover:underline">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a>
                    </p>
                </div>

                <div id="form-register" class="hidden">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold text-slate-800 mb-2">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h2>
                        <p class="text-slate-400">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏±‡πà‡∏á‡∏ó‡∏≥‡∏£‡∏∞‡∏ö‡∏ö</p>
                    </div>
                    <div class="space-y-5">
                        <div><label class="text-xs font-bold text-slate-500 ml-1">‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</label><input id="r-name" class="input-pro" placeholder="Full Name"></div>
                        <div><label class="text-xs font-bold text-slate-500 ml-1">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label><input id="r-email" class="input-pro" placeholder="name@example.com"></div>
                        <div><label class="text-xs font-bold text-slate-500 ml-1">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label><input id="r-pass" type="password" class="input-pro" placeholder="Create Password"></div>
                        <button onclick="Auth.register()" class="btn-pro w-full bg-indigo-600 shadow-lg shadow-indigo-500/20">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÉ‡∏´‡∏°‡πà</button>
                    </div>
                    <p class="text-center mt-8 text-sm text-slate-400">
                        ‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡πâ‡∏ß? <a href="#" onclick="View.toggleAuth('log')" class="text-blue-600 font-bold hover:underline">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
                    </p>
                </div>

            </div>
        </section>

        <section id="page-dashboard" class="hidden max-w-7xl mx-auto animate__animated animate__fadeIn">
            
            <div class="bg-gradient-to-r from-slate-900 to-slate-800 rounded-3xl p-8 md:p-12 mb-10 text-white shadow-2xl relative overflow-hidden">
                <div class="absolute top-0 right-0 w-64 h-64 bg-white opacity-5 rounded-full blur-3xl -mr-10 -mt-10"></div>
                <div class="relative z-10">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, <span id="dash-username" class="text-blue-400">User</span> üëã</h2>
                    <p class="text-slate-300 max-w-xl text-lg">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á? ‡∏™‡∏±‡πà‡∏á‡∏ó‡∏≥‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</p>
                </div>
            </div>

            <div class="grid lg:grid-cols-3 gap-10">
                
                <div class="lg:col-span-1">
                    <div class="bg-white p-8 rounded-3xl shadow-lg border border-slate-100 sticky top-24">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-12 h-12 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center text-xl"><i class="fa-solid fa-rocket"></i></div>
                            <div>
                                <h3 class="font-bold text-xl text-slate-800">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà</h3>
                                <p class="text-xs text-slate-400">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
                            </div>
                        </div>
                        
                        <div class="space-y-5">
                            <div>
                                <label class="text-xs font-bold text-slate-500 ml-1 mb-1 block">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô / ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</label>
                                <input id="ord-shop" class="input-pro" placeholder="‡πÄ‡∏ä‡πà‡∏ô Coffee Space">
                            </div>
                            <div>
                                <label class="text-xs font-bold text-slate-500 ml-1 mb-1 block">Email ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin ‡∏£‡πâ‡∏≤‡∏ô</label>
                                <input id="ord-adm-email" class="input-pro" placeholder="admin@shop.com">
                            </div>
                            <div>
                                <label class="text-xs font-bold text-slate-500 ml-1 mb-1 block">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô Admin ‡∏£‡πâ‡∏≤‡∏ô</label>
                                <input id="ord-adm-pass" class="input-pro" placeholder="‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
                            </div>
                            
                            <div class="bg-slate-50 p-4 rounded-xl border border-slate-200 text-xs text-slate-500 leading-relaxed">
                                <i class="fa-solid fa-shield-halved text-blue-500 mr-1"></i> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ô‡∏≥‡πÑ‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
                            </div>

                            <button onclick="App.createOrder()" class="btn-pro w-full bg-blue-600 hover:bg-blue-700 shadow-lg shadow-blue-500/20">
                                <i class="fa-solid fa-paper-plane"></i> ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
                            </button>
                        </div>
                    </div>
                </div>

                <div class="lg:col-span-2">
                    <div class="flex justify-between items-end mb-6">
                        <h3 class="text-2xl font-bold text-slate-800">‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h3>
                        <a href="https://m.me/YOUR_FB_ID" target="_blank" class="text-sm font-bold text-blue-600 hover:text-blue-800 flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow-sm hover:shadow transition">
                            <i class="fa-brands fa-facebook-messenger"></i> ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
                        </a>
                    </div>

                    <div id="projects-container" class="space-y-6">
                        <div class="text-center py-16 bg-white rounded-3xl border border-dashed border-slate-200">
                            <div class="w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-300 text-2xl">
                                <i class="fa-solid fa-folder-open"></i>
                            </div>
                            <p class="text-slate-400">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå</p>
                        </div>
                    </div>
                </div>

            </div>
        </section>

    </main>

    <script>
        // --- 1. FIREBASE CONFIG ---
        const firebaseConfig = {
            apiKey: "AIzaSyAHAkBhypqyJuuL22tLrFKN7ZqdEsqGDTk",
            authDomain: "rsdm-9ca2a.firebaseapp.com",
            projectId: "rsdm-9ca2a",
            storageBucket: "rsdm-9ca2a.firebasestorage.app",
            messagingSenderId: "299212700124",
            appId: "1:299212700124:web:730160dae6bb1b09cbb719"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // --- 2. VIEW LOGIC ---
        const View = {
            show: (page) => {
                document.getElementById('page-auth').classList.add('hidden');
                document.getElementById('page-dashboard').classList.add('hidden');
                
                if (page === 'login' || page === 'register') {
                    document.getElementById('page-auth').classList.remove('hidden');
                    View.toggleAuth(page === 'login' ? 'log' : 'reg');
                } else if (page === 'dashboard') {
                    document.getElementById('page-dashboard').classList.remove('hidden');
                }
            },
            toggleAuth: (mode) => {
                const log = document.getElementById('form-login');
                const reg = document.getElementById('form-register');
                if(mode === 'log') { log.classList.remove('hidden'); reg.classList.add('hidden'); }
                else { log.classList.add('hidden'); reg.classList.remove('hidden'); }
            },
            updateNav: (user) => {
                const guest = document.getElementById('nav-guest');
                const logged = document.getElementById('nav-user');
                if (user) {
                    guest.classList.add('hidden'); logged.classList.remove('hidden'); logged.classList.add('flex');
                    document.getElementById('user-name').innerText = user.displayName || '‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤';
                    document.getElementById('dash-username').innerText = user.displayName || '‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤';
                } else {
                    guest.classList.remove('hidden'); logged.classList.add('hidden'); logged.classList.remove('flex');
                }
            }
        };

        // --- 3. AUTH LOGIC ---
        const Auth = {
            login: () => {
                const e = document.getElementById('l-email').value;
                const p = document.getElementById('l-pass').value;
                auth.signInWithEmailAndPassword(e, p).catch(err => Swal.fire('‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', err.message, 'error'));
            },
            register: () => {
                const n = document.getElementById('r-name').value;
                const e = document.getElementById('r-email').value;
                const p = document.getElementById('r-pass').value;
                if(!n || !e || !p) return Swal.fire('‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö', 'warning');
                
                auth.createUserWithEmailAndPassword(e, p).then(cred => {
                    cred.user.updateProfile({ displayName: n });
                    Swal.fire('‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö', '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
                }).catch(err => Swal.fire('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', err.message, 'error'));
            },
            logout: () => auth.signOut().then(() => location.reload())
        };

        // --- 4. APP LOGIC ---
        const App = {
            init: () => {
                auth.onAuthStateChanged(user => {
                    View.updateNav(user);
                    if (user) {
                        View.show('dashboard');
                        App.loadProjects(user.uid);
                    } else {
                        View.show('login');
                    }
                });
            },
            createOrder: () => {
                const user = auth.currentUser;
                const shop = document.getElementById('ord-shop').value;
                const ae = document.getElementById('ord-adm-email').value;
                const ap = document.getElementById('ord-adm-pass').value;

                if(!shop || !ae || !ap) return Swal.fire('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á', 'warning');

                db.collection('web_orders').add({
                    uid: user.uid,
                    customerName: user.displayName,
                    shopName: shop,
                    adminEmail: ae,
                    adminPass: ap,
                    status: 'pending',
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                }).then(() => {
                    Swal.fire('‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß', '‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£', 'success');
                    document.getElementById('ord-shop').value = '';
                });
            },
            loadProjects: (uid) => {
                db.collection('web_orders').where('uid', '==', uid).orderBy('timestamp', 'desc').onSnapshot(snap => {
                    const container = document.getElementById('projects-container');
                    if(snap.empty) {
                        container.innerHTML = `<div class="text-center py-16 bg-white rounded-3xl border border-dashed border-slate-200"><div class="w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-300 text-2xl"><i class="fa-solid fa-folder-open"></i></div><p class="text-slate-400">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå</p></div>`;
                        return;
                    }

                    container.innerHTML = snap.docs.map(doc => {
                        const d = doc.data();
                        const statusMap = {
                            'pending': { text: '‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå', color: 'text-yellow-600', fill: 'st-pending-fill' },
                            'working': { text: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£', color: 'text-blue-600', fill: 'st-working-fill' },
                            'testing': { text: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (QC)', color: 'text-purple-600', fill: 'st-testing-fill' },
                            'completed': { text: '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢', color: 'text-green-600', fill: 'st-completed-fill' }
                        };
                        const st = statusMap[d.status] || statusMap['pending'];

                        return `
                            <div class="project-card group animate__animated animate__fadeIn">
                                <div class="flex justify-between items-start mb-4">
                                    <div class="flex items-center gap-4">
                                        <div class="w-12 h-12 rounded-2xl bg-slate-900 text-white flex items-center justify-center text-xl font-bold">
                                            ${d.shopName.charAt(0).toUpperCase()}
                                        </div>
                                        <div>
                                            <h4 class="font-bold text-lg text-slate-800 group-hover:text-blue-600 transition">${d.shopName}</h4>
                                            <p class="text-xs text-slate-400">${new Date(d.timestamp?.toDate()).toLocaleDateString('th-TH')}</p>
                                        </div>
                                    </div>
                                    <span class="text-xs font-bold px-3 py-1 bg-slate-50 rounded-full text-slate-500 border border-slate-100">
                                        Web App
                                    </span>
                                </div>

                                <div class="mb-4">
                                    <div class="flex justify-between text-xs font-bold mb-1">
                                        <span class="text-slate-400">Status</span>
                                        <span class="${st.color}">${st.text}</span>
                                    </div>
                                    <div class="status-bar-bg">
                                        <div class="status-bar-fill ${st.fill}"></div>
                                    </div>
                                </div>

                                <div class="bg-slate-50 p-3 rounded-xl border border-slate-100 text-xs text-slate-500 flex justify-between items-center">
                                    <span>Admin: <b>${d.adminEmail}</b></span>
                                    ${d.status === 'completed' 
                                        ? `<span class="text-green-600 font-bold flex items-center gap-1"><i class="fa-solid fa-check-circle"></i> ‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß</span>` 
                                        : `<span class="text-slate-400 italic">‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö...</span>`
                                    }
                                </div>
                            </div>
                        `;
                    }).join('');
                });
            }
        };

        App.init();
    </script>
</body>
</html>
